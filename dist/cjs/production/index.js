"use strict";var L=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var Z=(e,n)=>{for(var t in n)L(e,t,{get:n[t],enumerable:!0})},ee=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of G(n))!Y.call(e,o)&&o!==t&&L(e,o,{get:()=>n[o],enumerable:!(r=z(n,o))||r.enumerable});return e};var ne=e=>ee(L({},"__esModule",{value:!0}),e);var Ge={};Z(Ge,{$:()=>Ue,$$:()=>$e,Async:()=>g,Cookie:()=>Q,CssVar:()=>pe,Data:()=>f,Evt:()=>Be,Fn:()=>Je,Focus:()=>p,Form:()=>x,History:()=>X,Http:()=>Fe,Input:()=>c,Key:()=>w,Local:()=>Ne,Obj:()=>be,Option:()=>_e,Params:()=>me,Result:()=>y,SW:()=>De,Session:()=>Ce,Signal:()=>Ke,Text:()=>b,Traverse:()=>T,ViewTransitions:()=>E,after:()=>I,append:()=>F,batch:()=>he,before:()=>K,bind:()=>Qe,binder:()=>ze,blur:()=>Re,clone:()=>U,cloneMany:()=>Me,closest:()=>te,cls:()=>m,component:()=>je,computed:()=>ye,createBus:()=>Oe,createListenerGroup:()=>Ie,createQueue:()=>We,css:()=>M,cssTemplate:()=>Te,cycleClass:()=>B,debounce:()=>k,dispatch:()=>N,el:()=>oe,empty:()=>P,find:()=>S,findAll:()=>A,focus:()=>ke,form:()=>qe,groupBy:()=>xe,groupRefs:()=>we,html:()=>se,htmlMany:()=>ie,injectStyles:()=>ve,instantiate:()=>Se,isVisible:()=>He,modify:()=>v,nextFrame:()=>Ee,offset:()=>J,on:()=>d,onDelegated:()=>re,onMount:()=>ce,onReady:()=>le,prepend:()=>D,rect:()=>W,refs:()=>q,remove:()=>H,scrollInto:()=>Pe,store:()=>Ve,stripListeners:()=>ge,tempStyle:()=>C,throttle:()=>Ae,toColorSpace:()=>Le,view:()=>Xe,wait:()=>fe,waitFor:()=>de,waitTransition:()=>V,watchAttr:()=>j,watchClass:()=>ue,watchText:()=>$,wrap:()=>O});module.exports=ne(Ge);var h=e=>e.flat().filter(n=>n!=null&&n!==!1).map(n=>n instanceof Node?n:document.createTextNode(String(n))),S=(e=document)=>n=>e.querySelector(n),A=(e=document)=>n=>Array.from(e.querySelectorAll(n)),te=e=>n=>e==null?void 0:e.closest(n),d=e=>(n,t,r=!1)=>{if(!e)return()=>{};let o=s=>t(s,e);return e.addEventListener(n,o,r),()=>e.removeEventListener(n,o,r)},re=e=>(n,t,r,o=!1)=>{if(!e)return()=>{};let s=i=>{var l;let u=i.target,a=(l=u==null?void 0:u.closest)==null?void 0:l.call(u,t);a&&e.contains(a)&&r(i,a)};return e.addEventListener(n,s,o),()=>e.removeEventListener(n,s,o)},N=e=>(n,t,r={bubbles:!0})=>(e&&e.dispatchEvent(new CustomEvent(n,{detail:t,...r})),e),v=e=>n=>e?(n.text!==void 0&&(e.innerText=n.text),n.html!==void 0&&(e.innerHTML=n.html),n.value!==void 0&&(e.value=n.value),n.disabled!==void 0&&(e.disabled=n.disabled),n.style&&Object.assign(e.style,n.style),n.dataset&&Object.entries(n.dataset).forEach(([t,r])=>{r!==void 0&&(e.dataset[t]=r===null?void 0:String(r))}),n.class&&Object.entries(n.class).forEach(([t,r])=>e.classList.toggle(t,!!r)),n.attr&&Object.entries(n.attr).forEach(([t,r])=>{r===!1||r===null||r===void 0?e.removeAttribute(t):e.setAttribute(t,String(r))}),e):null,M=e=>n=>(e&&Object.assign(e.style,n),e),C=e=>n=>{if(!e)return()=>{};let t={};return Object.keys(n).forEach(r=>{t[r]=e.style[r]}),Object.assign(e.style,n),()=>Object.assign(e.style,t)},F=e=>(...n)=>(e==null||e.append(...h(n)),e),D=e=>(...n)=>(e==null||e.prepend(...h(n)),e),I=e=>(...n)=>(e==null||e.after(...h(n)),e),K=e=>(...n)=>(e==null||e.before(...h(n)),e),H=e=>(e==null||e.remove(),null),P=e=>(e&&e.replaceChildren(),e),O=e=>n=>(e&&n&&e.parentNode&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),n),oe=e=>(n={})=>(t=[])=>{let r=document.createElement(e);return v(r)(n),r.append(...h(t)),r},se=(e,...n)=>{let t=e.reduce((s,i,u)=>{var a;return s+i+((a=n[u])!=null?a:"")},""),r=document.createElement("template");r.innerHTML=t.trim();let o=r.content.firstElementChild;if(!o)throw new Error("html: Template did not result in an element");return o},ie=(e,...n)=>{let t=e.reduce((o,s,i)=>{var u;return o+s+((u=n[i])!=null?u:"")},""),r=document.createElement("template");return r.innerHTML=t.trim(),r.content},U=e=>(n=!0)=>e?e.cloneNode(n):null,m={add:e=>(...n)=>(e==null||e.classList.add(...n),e),remove:e=>(...n)=>(e==null||e.classList.remove(...n),e),toggle:e=>(n,t)=>(e==null||e.classList.toggle(n,t),e),replace:e=>(n,t)=>(e==null||e.classList.replace(n,t),e),has:e=>n=>!!e&&e.classList.contains(n)},ue=e=>(n,t)=>{if(!e)return()=>{};let r=e.classList.contains(n),o=new MutationObserver(()=>{let s=e.classList.contains(n);s!==r&&(r=s,t(s,e))});return o.observe(e,{attributes:!0,attributeFilter:["class"]}),()=>o.disconnect()},ae=e=>"data-"+e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),f={get:e=>n=>e==null?void 0:e.dataset[n],set:e=>(n,t)=>e&&(t==null?delete e.dataset[n]:e.dataset[n]=typeof t=="object"?JSON.stringify(t):String(t),e),read:e=>n=>{if(!e||!(n in(e.dataset||{})))return;let t=e.dataset[n];if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(!isNaN(Number(t))&&t.trim()!=="")return Number(t);try{return JSON.parse(t)}catch(r){return t}},bind:e=>(n,t)=>{if(!e)return()=>{};let r=ae(n),o=()=>t(f.read(e)(n),e);o();let s=new MutationObserver(i=>{i.some(u=>u.attributeName===r)&&o()});return s.observe(e,{attributes:!0,attributeFilter:[r]}),()=>s.disconnect()}},j=e=>(n,t)=>{if(!e)return()=>{};let r=new MutationObserver(o=>o.forEach(s=>{s.attributeName&&t(e.getAttribute(s.attributeName),s.attributeName)}));return r.observe(e,{attributes:!0,attributeFilter:Array.isArray(n)?n:[n]}),()=>r.disconnect()},$=e=>n=>{if(!e)return()=>{};let t=new MutationObserver(()=>{n(e.textContent||"")});return t.observe(e,{characterData:!0,childList:!0,subtree:!0}),()=>t.disconnect()},le=e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()},ce=e=>(n,t=document,r=!1)=>{let o=new WeakSet,s=!1,i=a=>{o.has(a)||(a.matches(e)&&(o.add(a),n(a),s=!0),a.querySelectorAll(e).forEach(l=>{o.has(l)||(o.add(l),n(l),s=!0)}))};t.querySelectorAll(e).forEach(i);let u=new MutationObserver(a=>a.forEach(l=>{l.addedNodes.forEach(R=>{R.nodeType===1&&i(R)})}));return r&&s?()=>{}:(u.observe(t,{childList:!0,subtree:!0}),()=>u.disconnect())},de=e=>n=>new Promise(t=>{if(!e)return;if(n(e))return t(e);let r=new MutationObserver(()=>{n(e)&&(r.disconnect(),t(e))});r.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}),me={get:e=>new URLSearchParams(window.location.search).get(e),getAll:e=>new URLSearchParams(window.location.search).getAll(e),set:e=>n=>(t="soft")=>{let r=new URL(window.location.href);r.searchParams.set(e,n),t==="hard"?window.location.href=r.href:window.history.pushState(null,"",r.href)}},x={serialize:e=>{let n={};return e&&e.querySelectorAll("input, select, textarea").forEach(t=>{t.name&&(t.type==="checkbox"?n[t.name]=t.checked:t.type==="radio"?t.checked&&(n[t.name]=t.value):t.type==="number"?n[t.name]=Number(t.value):n[t.name]=t.value)}),n},populate:e=>n=>e&&(Object.entries(n).forEach(([t,r])=>{let o=e.querySelector(`[name="${t}"]`);o&&(o.type==="checkbox"||o.type==="radio"?o.checked=!!r:o.value=String(r))}),e)},fe=e=>new Promise(n=>setTimeout(n,e)),Ee=()=>new Promise(e=>requestAnimationFrame(e)),Te=(e,...n)=>e.reduce((t,r,o)=>{var s;return t+r+((s=n[o])!=null?s:"")},""),T={parent:e=>(e==null?void 0:e.parentElement)||null,next:e=>e==null?void 0:e.nextElementSibling,prev:e=>e==null?void 0:e.previousElementSibling,children:e=>e?Array.from(e.children):[],siblings:e=>!e||!e.parentElement?[]:Array.from(e.parentElement.children).filter(n=>n!==e)},pe={set:e=>(n,t)=>(e==null||e.style.setProperty(n,t),e),get:e=>n=>e?getComputedStyle(e).getPropertyValue(n).trim():""},ye=e=>n=>{if(!e)return"";let t=getComputedStyle(e)[n];return typeof t=="string"?t:String(t)},ve=(e,n=document.head)=>{let t=document.createElement("style");return t.textContent=e,n.appendChild(t),()=>t.remove()},V=e=>new Promise(n=>{if(!e)return n(null);let t=()=>{e.removeEventListener("transitionend",t),e.removeEventListener("animationend",t),n(e)};e.addEventListener("transitionend",t),e.addEventListener("animationend",t),requestAnimationFrame(()=>{let r=getComputedStyle(e);r.transitionDuration==="0s"&&r.animationDuration==="0s"&&t()})}),be={clone:e=>{try{return structuredClone(e)}catch(n){return JSON.parse(JSON.stringify(e))}},isEqual:(e,n)=>e===n||JSON.stringify(e)===JSON.stringify(n),pick:(e,n)=>{let t={};return n.forEach(r=>{r in e&&(t[r]=e[r])}),t},omit:(e,n)=>{let t={...e};return n.forEach(r=>delete t[r]),t}},he=e=>n=>{if(!e)return[];let t=Array.from(e);return t.forEach(n),t},xe=e=>n=>{let t={};return e&&Array.from(e).forEach(r=>{let o=n(r);(t[o]=t[o]||[]).push(r)}),t},q=e=>{let n={};return e&&e.querySelectorAll("[data-ref]").forEach(t=>{t.dataset.ref&&(n[t.dataset.ref]=t)}),n},we=e=>{let n={};return e&&e.querySelectorAll("[data-ref]").forEach(t=>{let r=t.dataset.ref;r&&(n[r]=n[r]||[]).push(t)}),n},Le=(e,n="srgb")=>{let t=document.createElement("div");t.style.color=`color-mix(in ${n}, ${e} 100%, transparent)`,document.body.appendChild(t);let r=getComputedStyle(t).color;return t.remove(),r},B=e=>n=>e?()=>{let t=n.findIndex(o=>e.classList.contains(o));t>-1&&e.classList.remove(n[t]);let r=(t+1)%n.length;e.classList.add(n[r])}:()=>{},ge=e=>{if(!e||!e.parentNode)return e;let n=e.cloneNode(!0);return e.replaceWith(n),n},Se=e=>(n={})=>{let t=typeof e=="string"?document.querySelector(e):e;if(!t||!("content"in t))throw new Error(`instantiate: Invalid template '${e}'`);let r=t.content.cloneNode(!0);return Object.keys(n).length>0&&r.firstElementChild&&v(r.firstElementChild)(n),r},Me=e=>n=>e?Array.from({length:n}).map(()=>e.cloneNode(!0)):[],W=e=>e?e.getBoundingClientRect():new DOMRect(0,0,0,0),J=e=>{if(!e)return{top:0,left:0};let n=e.getBoundingClientRect(),t=document.documentElement;return{top:n.top+window.scrollY-t.clientTop,left:n.left+window.scrollX-t.clientLeft}},He=e=>!!(e&&(e.offsetWidth>0||e.offsetHeight>0)),Pe=e=>(n={behavior:"smooth",block:"start"})=>(e==null||e.scrollIntoView(n),e),ke=e=>n=>(e==null||e.focus(n),e),Re=e=>(e==null||e.blur(),e),k=(e,n)=>{let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>e(...r),n)}},Ae=(e,n)=>{let t=0;return(...r)=>{let o=Date.now();o-t>=n&&(e(...r),t=o)}},_=e=>({get:n=>{let t=e.getItem(n);if(!t)return null;try{return JSON.parse(t)}catch(r){return t}},set:n=>t=>{let r=typeof t=="object"?JSON.stringify(t):String(t);e.setItem(n,r)},remove:n=>e.removeItem(n),clear:()=>e.clear()}),Ne=_(window.localStorage),Ce=_(window.sessionStorage),Q={get:e=>{let n=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return n?decodeURIComponent(n[2]):null},set:e=>n=>(t={})=>{let r=new Date;r.setTime(r.getTime()+24*60*60*1e3*(t.days||0)),document.cookie=`${e}=${encodeURIComponent(n)};path=${t.path||"/"}`+(t.days?`;expires=${r.toUTCString()}`:"")+(t.secure?";secure":"")},remove:e=>{Q.set(e)("")({days:-1})}},Fe={get:async(e,n={})=>{let t=await fetch(e,{headers:n});if(!t.ok)throw new Error(`Http.get ${t.status}: ${t.statusText}`);return t.json()},post:e=>n=>async(t={})=>{let r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(n)});if(!r.ok)throw new Error(`Http.post ${r.status}: ${r.statusText}`);return r.json()},put:e=>n=>async(t={})=>{let r=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(n)});if(!r.ok)throw new Error(`Http.put ${r.status}: ${r.statusText}`);return r.json()},delete:async(e,n={})=>{let t=await fetch(e,{method:"DELETE",headers:n});if(!t.ok)throw new Error(`Http.delete ${t.status}: ${t.statusText}`);return t.json()}},De={register:async(e,n)=>{if("serviceWorker"in navigator)try{return await navigator.serviceWorker.register(e,n)}catch(t){return null}return null},post:e=>{navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage(e)}},Ie=()=>{let e=[];return{add:n=>{e.push(n)},clear:()=>{e.forEach(n=>n()),e.length=0}}},Ke={create:()=>{let e=new AbortController;return{signal:e.signal,abort:()=>e.abort()}},timeout:e=>{if("timeout"in AbortSignal)return AbortSignal.timeout(e);let n=new AbortController;return setTimeout(()=>n.abort(),e),n.signal},wrap:(e,n)=>n?n.aborted?Promise.reject(new DOMException("Aborted","AbortError")):new Promise((t,r)=>{let o=()=>{r(new DOMException("Aborted","AbortError")),n.removeEventListener("abort",o)};n.addEventListener("abort",o),e.then(s=>{n.removeEventListener("abort",o),t(s)},s=>{n.removeEventListener("abort",o),r(s)})}):e},Oe=()=>{let e=new EventTarget;return{on:(n,t)=>{let r=o=>t(o.detail);return e.addEventListener(n,r),()=>e.removeEventListener(n,r)},emit:(n,t)=>{e.dispatchEvent(new CustomEvent(n,{detail:t}))},once:(n,t)=>{let r=o=>t(o.detail);e.addEventListener(n,r,{once:!0})}}},Ue=e=>{let n=r=>(...o)=>(e&&r(e)(...o),t),t={raw:e,on:n(d),dispatch:n(N),modify:n(v),css:n(M),tempStyle:(r,o)=>{if(e){let s=C(e)(r);o&&setTimeout(s,o)}return t},append:n(F),prepend:n(D),after:n(I),before:n(K),remove:()=>{e&&H(e)},empty:()=>(e&&P(e),t),wrap:n(O),clone:()=>e?U(e):null,addClass:n(m.add),removeClass:n(m.remove),toggleClass:n(m.toggle),replaceClass:n(m.replace),hasClass:r=>e?m.has(e)(r):!1,cycleClass:n(B),dataGet:r=>e?f.get(e)(r):void 0,dataSet:n(f.set),dataRead:r=>e?f.read(e)(r):void 0,dataBind:(r,o)=>e?f.bind(e)(r,o):()=>{},watchAttr:(r,o)=>e?j(e)(r,o):()=>{},watchText:r=>e?$(e)(r):()=>{},val:r=>r===void 0?c.get(e):(c.set(e)(r),t),files:()=>c.files(e),onInput:r=>e?c.watch(e)(r):()=>{},onInputDebounced:(r,o)=>e?c.watchDebounced(e)(o,r):()=>{},onChange:r=>e?c.change(e)(r):()=>{},selectText:()=>(c.select(e),t),validate:()=>e?c.validate(e):!1,onKey:(r,o)=>(e&&w.is(e)(r,o),t),onTab:r=>(e&&w.onTab(e)(r),t),onArrow:r=>(e&&w.onArrow(e)(r),t),onFocus:r=>(e&&p.on(e)(r),t),onBlur:r=>(e&&p.onBlur(e)(r),t),onFocusIn:r=>(e&&p.onIn(e)(r),t),onFocusOut:r=>(e&&p.onOut(e)(r),t),trapFocus:()=>p.trap(e),clickOutside:r=>{if(!e)return()=>{};let o=s=>{e&&!e.contains(s.target)&&r()};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},hasText:r=>e?!!b.find(e)(r):!1,findText:(r,o)=>e?b.find(e)(r,o):null,findAllText:(r,o)=>e?b.findAll(e)(r,o):[],replaceText:(r,o)=>(e&&b.replace(e)(r,o),t),transitionName:n(E.name),removeTransitionName:()=>(E.unname(e),t),transitionWith:(r,o)=>E.tempName(e)(r)(o),parent:T.parent(e),next:T.next(e),prev:T.prev(e),children:T.children(e),siblings:T.siblings(e),rect:()=>W(e),offset:()=>J(e),scrollInto:r=>(e==null||e.scrollIntoView(r),t),focus:r=>(e==null||e.focus(r),t),blur:()=>(e==null||e.blur(),t),waitTransition:()=>V(e)};return t},je=e=>{let n=typeof e=="string"?S(document)(e):e;if(!n)return{};let t=q(n);return{root:n,...t}},$e=e=>{let n=typeof e=="string"?A(document)(e):Array.from(e),t=o=>(s,i)=>(n.forEach(u=>o(u)(s,i)),r),r={raw:n,modify:t(v),css:t(M),addClass:t(m.add),removeClass:t(m.remove),toggleClass:t(m.toggle),attr:t(o=>s=>v(o)({attr:s})),on:(o,s)=>{let i=n.map(u=>d(u)(o,s));return()=>i.forEach(u=>u())},remove:()=>n.forEach(o=>H(o)),empty:()=>n.forEach(o=>P(o)),map:o=>n.map(o),filter:o=>n.filter(o)};return r},Ve=e=>e?new Proxy({},{get:(n,t)=>f.read(e)(t),set:(n,t,r)=>(f.set(e)(t,r),!0),deleteProperty:(n,t)=>(f.set(e)(t,null),!0),ownKeys:()=>Reflect.ownKeys(e.dataset),getOwnPropertyDescriptor:(n,t)=>({enumerable:!0,configurable:!0})}):{},qe=e=>{let n=typeof e=="string"?S(document)(e):e;return{raw:n,values:()=>x.serialize(n),set:t=>x.populate(n)(t),clear:()=>{n&&n.querySelectorAll("input, select, textarea").forEach(t=>{t.type==="checkbox"||t.type==="radio"?t.checked=!1:t.value=""})},submit:t=>d(n)("submit",r=>{r.preventDefault(),t(x.serialize(n),r)})}},c={get:e=>{if(e){if(e instanceof HTMLInputElement){if(e.type==="checkbox"||e.type==="radio")return e.checked;if(e.type==="number"||e.type==="range")return e.valueAsNumber;if(e.type==="file")return e.files;if(e.type==="date")return e.valueAsDate}return e.value}},set:e=>n=>e&&(e instanceof HTMLInputElement?e.type==="checkbox"||e.type==="radio"?e.checked=!!n:e.type==="file"?n||(e.value=""):e.type==="date"&&n instanceof Date?e.valueAsDate=n:e.value=String(n):e.value=String(n),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e),files:e=>e&&e.files?Array.from(e.files):[],watch:e=>n=>{if(!e)return()=>{};let t=r=>n(c.get(e),r);return e.addEventListener("input",t),()=>e.removeEventListener("input",t)},watchDebounced:e=>(n,t)=>{if(!e)return()=>{};let r=k(o=>n(c.get(e)),t);return e.addEventListener("input",r),()=>e.removeEventListener("input",r)},change:e=>n=>{if(!e)return()=>{};let t=r=>n(c.get(e),r);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},select:e=>(e==null||e.select(),e),validate:e=>n=>e?(n!==void 0&&e.setCustomValidity(n),e.checkValidity()):!1},Be={stop:e=>n=>{n.stopPropagation(),e&&e(n)},prevent:e=>n=>{n.preventDefault(),e&&e(n)},kill:e=>n=>{n.preventDefault(),n.stopPropagation(),e&&e(n)},key:(e,n)=>t=>{(Array.isArray(e)?e:[e]).includes(t.key)&&n(t)},isSelf:e=>e.target===e.currentTarget,pointer:e=>{if("touches"in e){let n=e.touches[0]||e.changedTouches[0];return{x:n.clientX,y:n.clientY}}return{x:e.clientX,y:e.clientY}}},w={is:e=>(n,t)=>d(e)("keydown",r=>{r.key===n&&t(r)}),onTab:e=>n=>d(e)("keydown",t=>{t.key==="Tab"&&n(t)}),onArrow:e=>n=>d(e)("keydown",t=>{if(t.key.startsWith("Arrow")){let r=t.key.replace("Arrow","");n(r,t)}})},p={on:e=>n=>d(e)("focus",n),onBlur:e=>n=>d(e)("blur",n),onIn:e=>n=>d(e)("focusin",n),onOut:e=>n=>d(e)("focusout",n),trap:e=>{if(!e)return()=>{};let n=t=>{if(t.key!=="Tab")return;let r=e.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),o=r[0],s=r[r.length-1];t.shiftKey?document.activeElement===o&&(t.preventDefault(),s.focus()):document.activeElement===s&&(t.preventDefault(),o.focus())};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)}},b={findAll:(e=document)=>(n,t="*")=>{let r=new Set,o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),s;for(;s=o.nextNode();){let i=s.parentElement,u=s.nodeValue||"";if(!i||!i.matches(t))continue;(typeof n=="string"?u.includes(n):n.test(u))&&r.add(i)}return Array.from(r)},find:(e=document)=>(n,t="*")=>{let r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),o;for(;o=r.nextNode();){let s=o.parentElement,i=o.nodeValue||"";if(!s||!s.matches(t))continue;if(typeof n=="string"?i.includes(n):n.test(i))return s}return null},replace:e=>(n,t)=>{if(!e)return e;let r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),o;for(;o=r.nextNode();){let s=o.nodeValue||"";(typeof n=="string"?s.includes(n):n.test(s))&&(o.nodeValue=s.replace(n,t))}return e}},E={isSupported:()=>"startViewTransition"in document,name:e=>n=>(e&&(e.style.viewTransitionName=n),e),unname:e=>(e&&e.style.removeProperty("view-transition-name"),e),start:e=>"startViewTransition"in document?document.startViewTransition(e):(e(),null),withClass:e=>n=>{document.documentElement.classList.add(e);let t=E.start(n);return t?t.finished.finally(()=>document.documentElement.classList.remove(e)):document.documentElement.classList.remove(e),t},tempName:e=>n=>t=>{if(!e)return E.start(t);e.style.viewTransitionName=n;let r=E.start(t);return r?r.finished.finally(()=>e.style.removeProperty("view-transition-name")):e.style.removeProperty("view-transition-name"),r}},g={resolve:e=>Promise.resolve(e),sleep:e=>new Promise(n=>setTimeout(n,e)),nextFrame:()=>new Promise(e=>requestAnimationFrame(e)),retry:(e,n={})=>{let{retries:t=3,delay:r=100,factor:o=2}=n;return e().catch(s=>{if(t<=0)throw s;return g.sleep(r).then(()=>g.retry(e,{retries:t-1,delay:r*o,factor:o}))})},timeout:(e,n)=>Promise.race([e,new Promise((t,r)=>setTimeout(()=>r(new Error("TimeoutError")),n))]),map:async(e,n,t=1/0)=>{let r=[],o=e.map((i,u)=>({item:i,i:u})),s=async()=>{for(;o.length>0;){let{item:i,i:u}=o.shift();r[u]=await n(i,u)}};return await Promise.all(Array.from({length:Math.min(e.length,t)},s)),r},defer:()=>{let e,n;return{promise:new Promise((r,o)=>{e=r,n=o}),resolve:e,reject:n}},cancelable:e=>{let n=!1;return{promise:new Promise((r,o)=>{e.then(s=>!n&&r(s),s=>!n&&o(s))}),cancel:()=>{n=!0}}}},We=(e={})=>{let n=e.concurrency||1,t=[],r=0,o=!e.autoStart&&e.autoStart!==void 0,s={drain:[],error:[]},i=()=>{if(o||r>=n||t.length===0){r===0&&t.length===0&&s.drain.forEach(a=>a());return}let u=t.shift();u&&(r++,Promise.resolve().then(()=>u.fn()).then(a=>u.resolve(a)).catch(a=>{s.error.forEach(l=>l(a)),u.reject(a)}).finally(()=>{r--,i()}),i())};return{add:u=>new Promise((a,l)=>{t.push({fn:u,resolve:a,reject:l}),i()}),pause:()=>{o=!0},resume:()=>{o=!1,i()},clear:()=>{t.length=0},size:()=>t.length+r,drain:()=>new Promise(u=>{if(r===0&&t.length===0)return u();s.drain.push(u)}),onError:u=>s.error.push(u)}},X={query:e=>(n="push")=>{let t=new URL(window.location.href);Object.entries(e).forEach(([o,s])=>{t.searchParams.delete(o),!(s==null||s==="")&&(Array.isArray(s)?s.forEach(i=>t.searchParams.append(o,String(i))):t.searchParams.set(o,String(s)))});let r=n==="replace"?"replaceState":"pushState";window.history[r](window.history.state,"",t.href)},readQuery:()=>Object.fromEntries(new URLSearchParams(window.location.search)),readQueryAll:()=>{let e={};return new URLSearchParams(window.location.search).forEach((n,t)=>{(e[t]=e[t]||[]).push(n)}),e},push:(e,n)=>{window.history.pushState(n,"",e)},replace:(e,n)=>{window.history.replaceState(n,"",e)},state:()=>window.history.state,back:()=>window.history.back(),forward:()=>window.history.forward(),reload:()=>window.location.reload(),onPop:e=>(window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)),encodeState:e=>{try{let n=JSON.stringify(e);return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16))))}catch(n){return""}},decodeState:e=>{try{let n=decodeURIComponent(Array.prototype.map.call(atob(e),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(n){return null}},syncToUrl:(e,n=300)=>t=>{if(!t)return()=>{};let r=t.type==="checkbox"||t.type==="radio",o=()=>{let i=new URLSearchParams(window.location.search).get(e);i!==null&&(r?t.checked=i==="true":t.value=i)},s=k(()=>{let i=r?String(t.checked):t.value;X.query({[e]:i})("replace")},n);return o(),t.addEventListener("input",s),t.addEventListener("change",s),window.addEventListener("popstate",o),()=>{t.removeEventListener("input",s),t.removeEventListener("change",s),window.removeEventListener("popstate",o)}}},Je={pipe:(...e)=>n=>e.reduce((t,r)=>r(t),n),curry:e=>n=>t=>e(n,t),swap:e=>n=>t=>e(t)(n),flip:e=>(n,t)=>e(t,n),tap:e=>n=>(e(n),n),maybe:e=>n=>n==null?null:e(n),unbind:e=>(n,t)=>e(t)(n),thunk:(e,...n)=>()=>e(...n),identity:e=>e,noop:()=>{}},y={ok:e=>({ok:!0,val:e,err:null}),err:e=>({ok:!1,val:null,err:e}),try:e=>{try{return y.ok(e())}catch(n){return y.err(n instanceof Error?n:new Error(String(n)))}},async:async e=>{try{let n=await e();return y.ok(n)}catch(n){return y.err(n instanceof Error?n:new Error(String(n)))}},unwrap:e=>{if(e.ok)return e.val;throw e.err},unwrapOr:(e,n)=>e.ok?e.val:n,map:(e,n)=>e.ok?y.ok(n(e.val)):e},_e={from:e=>({val:e,isSome:e!=null,isNone:e==null}),unwrapOr:(e,n)=>e!=null?e:n,map:(e,n)=>e!=null?n(e):null,then:(e,n)=>{e!=null&&n(e)}},Qe={val:(e,n)=>{let t=e;return r=>{Object.is(t,r)||(t=r,n(r))}},text:e=>{let n;return t=>{e&&n!==t&&(n=t,e.textContent=t)}},html:e=>{let n;return t=>{e&&n!==t&&(n=t,e.innerHTML=t)}},attr:(e,n)=>{let t=r=>{let o;return s=>{!r||o===s||(o=s,s===null||s===!1?r.removeAttribute(e):r.setAttribute(e,String(s)))}};return n!==void 0?t(n):t},toggle:(e,n)=>{let t=r=>{let o;return s=>{!r||o===s||(o=s,r.classList.toggle(e,s))}};return n!==void 0?t(n):t},list:(e,n)=>{let t;return r=>{if(!e||r===t)return;if(t=r,r.length===0){e.firstChild&&e.replaceChildren();return}let o=document.createDocumentFragment();r.forEach((s,i)=>o.appendChild(n(s,i))),e.replaceChildren(o)}}},Xe=e=>{let n=document.createElement("template");return n.innerHTML=e.trim(),()=>{let t=document.importNode(n.content,!0),r={};return t.querySelectorAll("[data-ref]").forEach(s=>{let i=s.dataset.ref;i&&(r[i]=s)}),{root:t.children.length===1?t.firstElementChild:t,refs:r}}},ze=(e,n)=>{let t={};for(let r in n)e[r]&&(t[r]=n[r](e[r]));return t};
/**
 * fdom (Functional DOM) - v2.0.0
 * ==========================================
 * A production-grade, target-first, type-safe DOM library.
 *
 * -----------------------------------------------------------------------------
 * ðŸ§  DESIGN PHILOSOPHY
 * -----------------------------------------------------------------------------
 * 1. Target-First: `Action(Element)(Config)` pattern for intuitive chaining.
 * 2. Curried: Functions return closures for composition/piping.
 * 3. Null-Safe: All functions fail gracefully on `null`/`undefined` targets.
 * 4. Type-Safe: Full Generics for HTML Elements, Events, and Return types.
 *
 * -----------------------------------------------------------------------------
 * ðŸ“š API DIRECTORY (27 MODULES)
 * -----------------------------------------------------------------------------
 *
 * ðŸŸ¢ DOM CORE
 *    1. Querying ......... find, findAll, closest
 *    2. Events ........... on, onDelegated, dispatch
 *    3. Manipulation ..... modify, css, tempStyle
 *    4. Structure ........ append, prepend, after, before, remove, wrap
 *    5. Creation ......... el, html, htmlMany, clone
 *
 * ðŸ”µ STATE & ATTRIBUTES
 *    6. Classes .......... cls (add/remove/toggle), watchClass
 *    7. Attributes ....... Data (get/set/read/bind), watchAttr, watchText
 *    12. Objects ......... Obj (clone, isEqual, pick, omit)
 *    14. Refs ............ refs, groupRefs (data-ref handling)
 *    16. Cycling ......... cycleClass (State machines)
 *
 * ðŸŸ¡ LIFECYCLE & OBSERVATION
 *    8. Lifecycle ........ onReady, onMount, waitFor
 *    17. Cleanup ......... stripListeners, instantiate, cloneMany
 *    20. Timing .......... debounce, throttle
 *    25. Groups .......... createListenerGroup (Batch cleanup)
 *    26. Signals ......... Signal (AbortController wrappers)
 *
 * ðŸŸ£ LAYOUT & NAVIGATION
 *    10. Navigation ...... Traverse (parent, children, siblings, next, prev)
 *    11. CSS Utils ....... CssVar, computed, injectStyles, waitTransition
 *    15. Color ........... toColorSpace (Color mix utils)
 *    18. Geometry ........ rect, offset, isVisible
 *    19. Scroll/Focus .... scrollInto, focus, blur
 *
 * ðŸŸ  DATA & NETWORK
 *    9. URL/Form ......... Params, Form (serialize/populate)
 *    13. Collections ..... batch, groupBy
 *    21. Storage ......... Local, Session (Typed wrappers)
 *    22. Cookies ......... Cookie (get/set/remove)
 *    23. Network ......... Http (get/post/put/delete)
 *    24. PWA ............. SW (Service Worker reg/post)
 *    27. Pub/Sub ......... createBus (Typed Event Emitter)
 *
 * @module fdom
 * @author Patrick Glenn
 * @license MIT
 */
